(function(b,a,c){var d=b(a);b.fn.lazyload=function(e){function f(){var a=0;h.each(function(){var c=b(this);if(!i.skip_invisible||c.is(":visible"))if(b.abovethetop(this,i)||b.leftofbegin(this,i));else if(!b.belowthefold(this,i)&&!b.rightoffold(this,i))c.trigger("appear"),a=0;else if(++a>i.failure_limit)return!1})}var g,h=this,i={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:a,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return e&&(void 0!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),void 0!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),b.extend(i,e)),g=void 0===i.container||i.container===a?d:b(i.container),0===i.event.indexOf("scroll")&&g.bind(i.event,function(){return f()}),this.each(function(){var a=this,c=b(a);a.loaded=!1,(void 0===c.attr("src")||!1===c.attr("src"))&&c.is("img")&&c.attr("src",i.placeholder),c.one("appear",function(){if(!this.loaded){if(i.appear){var d=h.length;i.appear.call(a,d,i)}b("<img />").bind("load",function(){var d=c.attr("data-"+i.data_attribute);c.hide(),c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')"),c[i.effect](i.effect_speed),a.loaded=!0;var e=b.grep(h,function(a){return!a.loaded});if(h=b(e),i.load){var f=h.length;i.load.call(a,f,i)}}).attr("src",c.attr("data-"+i.data_attribute))}}),0!==i.event.indexOf("scroll")&&c.bind(i.event,function(){a.loaded||c.trigger("appear")})}),d.bind("resize",function(){f()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&d.bind("pageshow",function(a){a.originalEvent&&a.originalEvent.persisted&&h.each(function(){b(this).trigger("appear")})}),b(c).ready(function(){f()}),this},b.belowthefold=function(c,e){var f;return f=void 0===e.container||e.container===a?(a.innerHeight?a.innerHeight:d.height())+d.scrollTop():b(e.container).offset().top+b(e.container).height(),f<=b(c).offset().top-e.threshold},b.rightoffold=function(c,e){var f;return f=void 0===e.container||e.container===a?d.width()+d.scrollLeft():b(e.container).offset().left+b(e.container).width(),f<=b(c).offset().left-e.threshold},b.abovethetop=function(c,e){var f;return f=void 0===e.container||e.container===a?d.scrollTop():b(e.container).offset().top,f>=b(c).offset().top+e.threshold+b(c).height()},b.leftofbegin=function(c,e){var f;return f=void 0===e.container||e.container===a?d.scrollLeft():b(e.container).offset().left,f>=b(c).offset().left+e.threshold+b(c).width()},b.inviewport=function(a,c){return!b.rightoffold(a,c)&&!b.leftofbegin(a,c)&&!b.belowthefold(a,c)&&!b.abovethetop(a,c)},b.extend(b.expr[":"],{"below-the-fold":function(c){return b.belowthefold(c,{threshold:0})},"above-the-top":function(c){return!b.belowthefold(c,{threshold:0})},"right-of-screen":function(c){return b.rightoffold(c,{threshold:0})},"left-of-screen":function(c){return!b.rightoffold(c,{threshold:0})},"in-viewport":function(c){return b.inviewport(c,{threshold:0})},"above-the-fold":function(c){return!b.belowthefold(c,{threshold:0})},"right-of-fold":function(c){return b.rightoffold(c,{threshold:0})},"left-of-fold":function(c){return!b.rightoffold(c,{threshold:0})}})})(jQuery,window,document);